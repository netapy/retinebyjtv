import{S as H,i as Q,s as K,e as f,k as q,t as B,c as h,a as _,d as g,m as I,h as T,b as m,M as U,f as y,g as W,J as s,Q as N,ai as X,j as F,E as R,R as Y}from"../../../chunks/index-374dfc94.js";import{x as Z}from"../../../chunks/cookiesAndAuth-44faa8b3.js";function $(o){let t,a,n,S,x,r,d,c,w=o[0].nom_proj+"",j,V,e,p,v=o[0].crea_date.split("T")[0]+"",b,u,E,C=o[1]?"Brouillon":o[0].reponse.length.toString()+" r\xE9ponses",D,P,O;return{c(){t=f("div"),a=f("div"),n=f("img"),x=q(),r=f("div"),d=f("div"),c=f("h3"),j=B(w),V=q(),e=f("div"),p=f("div"),b=B(v),u=q(),E=f("div"),D=B(C),this.h()},l(l){t=h(l,"DIV",{class:!0});var i=_(t);a=h(i,"DIV",{class:!0});var z=_(a);n=h(z,"IMG",{class:!0,src:!0,alt:!0}),z.forEach(g),x=I(i),r=h(i,"DIV",{class:!0,style:!0});var A=_(r);d=h(A,"DIV",{});var G=_(d);c=h(G,"H3",{});var J=_(c);j=T(J,w),J.forEach(g),G.forEach(g),A.forEach(g),V=I(i),e=h(i,"DIV",{class:!0});var k=_(e);p=h(k,"DIV",{class:!0});var L=_(p);b=T(L,v),L.forEach(g),u=I(k),E=h(k,"DIV",{});var M=_(E);D=T(M,C),M.forEach(g),k.forEach(g),i.forEach(g),this.h()},h(){m(n,"class","w-100"),U(n.src,S=o[1]?"/icons/delete.svg":"/icons/share.svg")||m(n,"src",S),m(n,"alt","bouton partger"),m(a,"class","threeDot hvr-bounce-in svelte-26qoix"),m(r,"class","p-3 pr-5 w-100 h-75 m-0"),y(r,"background-color",o[1]?"grey":o[0].color),y(r,"border-radius","10px 10px 0px 0px"),y(r,"color","white"),m(p,"class","d-fk"),m(e,"class","px-3 flex-fill d-flex justify-content-between align-items-center w-100"),m(t,"class","neuProjet d-flex align-items-center justify-content-stretch flex-column hvr-float svelte-26qoix")},m(l,i){W(l,t,i),s(t,a),s(a,n),s(t,x),s(t,r),s(r,d),s(d,c),s(c,j),s(t,V),s(t,e),s(e,p),s(p,b),s(e,u),s(e,E),s(E,D),P||(O=[N(a,"click",X(o[2])),N(t,"click",o[3])],P=!0)},p(l,[i]){i&1&&w!==(w=l[0].nom_proj+"")&&F(j,w),i&1&&y(r,"background-color",l[1]?"grey":l[0].color),i&1&&v!==(v=l[0].crea_date.split("T")[0]+"")&&F(b,v),i&1&&C!==(C=l[1]?"Brouillon":l[0].reponse.length.toString()+" r\xE9ponses")&&F(D,C)},i:R,o:R,d(l){l&&g(t),P=!1,Y(O)}}}function ee(o){navigator.clipboard.writeText("retine.io/sondage#"+o.toString()).then(function(){Swal.fire("Lien du sondage copi\xE9 !","retine.io/sondage#"+o.toString(),"success")},function(){console.log("error")})}function te(o,t,a){let{sondage:n}=t,{activePage:S}=t,{loadSondage:x}=t,{updateFun:r}=t,{loadSView:d}=t,c=n.reponse.length==0&&n.priv==!0;async function w(e){Swal.fire({title:"Supprimer le sondage?",text:"Vous ne pourrez plus revenir en arri\xE8re.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Supprimer le sondage",cancelButtonText:"Annuler"}).then(p=>{if(p.isConfirmed){var v=new Headers;v.append("Authorization","Token "+Z("rtnt"));var b={method:"DELETE",headers:v,redirect:"follow"};return fetch(`https://retinereq.jetevois.fr:8000/sondages/edit/${e}/`,b).then(u=>u.text()).then(u=>{Swal.fire("Sondage supprim\xE9","Votre sondage ainsi que les r\xE9ponses ont \xE9t\xE9 supprim\xE9s.","success").then(()=>(r(),u))}).catch(u=>u)}})}const j=()=>{c?w(n.id):ee(n.id),window.event.stopPropagation()},V=()=>{c?(a(0,n.jsonContent=JSON.parse(n.jsonContent),n),x(n,n.id)):(d(n),a(4,S="projectView"))};return o.$$set=e=>{"sondage"in e&&a(0,n=e.sondage),"activePage"in e&&a(4,S=e.activePage),"loadSondage"in e&&a(5,x=e.loadSondage),"updateFun"in e&&a(6,r=e.updateFun),"loadSView"in e&&a(7,d=e.loadSView)},[n,c,j,V,S,x,r,d]}class ae extends H{constructor(t){super(),Q(this,t,te,$,K,{sondage:0,activePage:4,loadSondage:5,updateFun:6,loadSView:7})}}export{ae as default};
